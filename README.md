# Поиск четырех светодиодов

## 1. Good images

![good images](images/good.png)

## 2. Bad images

![bad images](images/bad.png)

## 3. Описание алгоритма

Для достижения поставленной цели:

1. Представим исходное изображение (a) в log-полярной системе координат. В этом случае следует, что масштабирование исходного изображения, приводит к линейному смещению вдоль оси X его образа, представленного в полярно-логарифмической системе координат (b). Также следует, что вращение исходного изображения в декартовой системы координат будет приводить к линейному смещению вдоль оси Y, представленному в log-полярной системе координат. Последнее утверждение для данной задачи неактуально , т.к. относительное положение светодиодов всегда постоянно.
2. Свернем log-полярное изображение с LoG-фильтром ([Laplacian of Gaussian](https://en.wikipedia.org/wiki/Blob_detection#The_Laplacian_of_Gaussian)). Маску LoG-фильра приближаем с помощью разницы гауссиан. ([DoG](https://en.wikipedia.org/wiki/Difference_of_Gaussians)). Размер фильтра подбираем из тех соображений, что лапласиан достигает максимума в &#963; = r / &#8730;2. Где r – радиус детектируемого блоба. Для задачи обнаружения четырех светодиодов положим r = H<sub>LP</sub> / 16 , где H<sub>LP</sub>  - высота изображения (b). Результат представлен на рисунке (с).
3. Найдем положение четырех максимальных пиков на изображении (c). Результат представлен зелеными точки на изображении (c). На рисунке (d) представлен результат kmean сегментации изображений на 3 класса, который может быть использован при обнаружении областей пиков.
4.  Для четырех найденных точек решим задачу наличия 4 светодиодов. Результат наличия светодиодов достигается при следующих условиях:

- По оси Y точки лежат с периодом  H<sub>LP</sub> / 4

- По оси X точки лежат на одной линии с минимальным разбросом. abs(mean<sub>X</sub> – X<sub>i</sub>) < T

Результат обнаружения светодиодов представлен зелеными маркерами на рисунке (e).



